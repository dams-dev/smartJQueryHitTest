/*	
 *	jQuery hitTest plugin
 *	Demo and documentation:
 *	http://e-smartdev.com/#!jsPluginList/hittestJQuery
 *	
 *	Copyright (c) 2012 Damien Corzani
 *	http://e-smartdev.com/
 *
 *	Dual licensed under the MIT and GPL licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */
(function(b){b.fn.getRect=function(){var e=this.offset();if(!e){return null}var d=e.left;var c=e.top;return new Rectangle(d,c,this.outerWidth(),this.outerHeight())};b.fn.hitTestPoint=function(g){var h=b.extend({x:0,y:0,transparency:false},g);var e=this.getRect();var j=e.rectContainsPoint(h.x,h.y);var d=this[0];if(!h.transparency||(!(b(d).is("img"))&&!(b(d).is("canvas")))){return j}if(!j){return false}var f=a(d);if(f==null){return true}var c=f.getContext("2d");var i=c.getImageData(h.x-e.x,h.y-e.y,1,1);return i.data[3]!=0};b.fn.objectHitTest=function(t){var f=b.extend({object:null,transparency:false},t);if(f.object==null){return false}var d=this.getRect();var k=f.object.getRect();var e=d.intersects(k);var g=this[0];if(!f.transparency||(!(b(g).is("img"))&&!(b(g).is("canvas")))){return rectHitTest}if(!e){return false}var h=a(g);var c=a(f.object[0]);if(h==null||c==null){return true}var n=h.getContext("2d");var s=c.getContext("2d");var q=d.intersection(k);if(!q){return true}var m=n.getImageData(q.x-d.x,q.y-d.y,q.width>0?q.width:1,q.height>0?q.height:1);var l=s.getImageData(q.x-k.x,q.y-k.y,q.width>0?q.width:1,q.height>0?q.height:1);var p=m.data;var o=l.data;var r=m.width*m.height*4;for(var j=0;j<r;j+=4){if(p[j+3]!=0&&o[j+3]!=0){return true}}return false};function a(e){var f=b(e).is("img");if(!f&&!(b(e).is("canvas"))){return null}var d=f?document.createElement("canvas"):e;if(!d.getContext){return null}var c;if(f){d.setAttribute("width",b(e).outerWidth());d.setAttribute("height",b(e).outerHeight());c=d.getContext("2d");c.drawImage(e,0,0,b(e).outerWidth(),b(e).outerHeight())}return d}})(jQuery);function Rectangle(b,d,c,a){this.x=b;this.y=d;this.width=c;this.height=a;this.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"};this.rectContainsPoint=function(f,e){return(f>=this.x&&f<=this.x+this.width&&e>=this.y&&e<=this.y+this.height)};this.intersects=function(e){return(this.x<=e.x+e.width&&e.x<=this.x+this.width&&this.y<=e.y+e.height&&e.y<=this.y+this.height)};this.intersection=function(h){var i=Math.max(this.x,h.x);var f=Math.min(this.x+this.width,h.x+h.width);if(i<=f){var g=Math.max(this.y,h.y);var e=Math.min(this.y+this.height,h.y+h.height);if(g<=e){return new Rectangle(i,g,f-i,e-g)}}return null}};
